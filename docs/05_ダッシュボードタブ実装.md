# 05_ダッシュボードタブ実装

**Phase**: Phase 2 (Week 2)

## 概要
`app.py` のダッシュボードタブにグラフを配置し、フィルターUI、KPI表示、インタラクション機能を実装します。

## タスク
- [×] KPIセクション実装
  - [×] `st.columns(4)` で4カラムレイアウト
  - [×] 総売上表示（`st.metric`）
  - [×] 総利益表示（`st.metric`）
  - [×] 平均利益率表示（`st.metric`）
  - [×] 総注文数表示（`st.metric`）
- [×] フィルターUI実装（サイドバー）
  - [×] 日付範囲選択（`st.date_input`）
  - [×] カテゴリ選択（`st.multiselect`）
  - [×] 地域選択（`st.multiselect`）
  - [×] セグメント選択（`st.multiselect`）
  - [×] Top N選択スライダー（`st.slider`）
  - [×] 「フィルターをリセット」ボタン
- [×] フィルター適用処理
  - [×] ユーザー選択をfilters辞書に変換
  - [×] `data_processor.apply_filters` 呼び出し
  - [×] フィルター後のデータでグラフ更新
  - [×] `st.spinner` でローディング表示
- [×] グラフ配置（2カラムレイアウト）
  - [×] 売上推移グラフ（全幅）
  - [×] 商品ランキング＋顧客分析（2カラム）
  - [×] 前年同月比較＋地域別売上（2カラム）
  - [×] カテゴリ別構成＋利益率分析（2カラム）
- [×] グラフオプション実装
  - [×] 売上推移の期間切り替え（日次/月次/年次）セレクトボックス
  - [×] 商品ランキングのTop N動的変更（サイドバースライダー連動）
  - [×] 各グラフの下に説明キャプション追加
- [×] ローディング表示
  - [×] フィルター処理に `st.spinner` 追加
  - [×] 各グラフにtry-except エラーハンドリング
- [×] データダウンロード機能
  - [×] **フィルター済みデータをExcelダウンロード**（`st.download_button`）

## 実装メモ
- `st.columns` でグラフを横並び配置
  ```python
  col1, col2 = st.columns(2)
  with col1:
      st.plotly_chart(fig1, use_container_width=True)
  with col2:
      st.plotly_chart(fig2, use_container_width=True)
  ```
- フィルター変更時は自動でグラフが更新されるようにする
