# 02_データ処理基盤

**Phase**: Phase 1 (Week 1)

## 概要
データ処理の中核となる `src/data_processor.py` モジュールを実装します。CSV読込、複数ファイル統合、データクリーニング、フィルター機能を提供します。

## タスク
- [×] `src/__init__.py` 作成
- [×] `src/data_processor.py` 作成
- [×] `load_csv(file)` 関数実装
  - [×] CSVファイルを読み込み
  - [×] エンコーディングエラーハンドリング（UTF-8, Shift-JIS対応）
  - [×] 読み込み成功/失敗のログ出力
- [×] `merge_dataframes(dfs)` 関数実装
  - [×] 複数DataFrameを `pd.concat` で統合
  - [×] `ignore_index=True` でインデックスリセット
  - [×] 統合後の行数・カラム数確認
- [×] `clean_data(df)` 関数実装
  - [×] 日付カラムのパース（`Order Date`, `Ship Date`）
  - [×] 欠損値チェック・レポート
  - [×] 数値カラムの型変換（`Sales`, `Profit`, `Quantity`, `Discount`）
  - [×] 重複行の削除（`df.drop_duplicates()`）
  - [×] 異常値チェック（負の売上など）
- [×] `apply_filters(df, filters)` 関数実装
  - [×] 日付範囲フィルター
  - [×] カテゴリフィルター（`Category`, `Sub-Category`）
  - [×] 地域フィルター（`Region`）
  - [×] 顧客セグメントフィルター（`Segment`）
- [×] `export_to_excel(df)` 関数実装
  - [×] DataFrameをExcelファイル（バイナリ）に変換
  - [×] openpyxlエンジンを使用
  - [×] 列幅の自動調整
  - [×] シート名を 'Sales Data' に設定

## 実装メモ
- 日付パースは `pd.to_datetime(df['Order Date'], errors='coerce')` でエラー時もNaTに変換
- 欠損値が多い場合は警告を表示
- フィルター関数は辞書形式で条件を受け取る設計
  ```python
  filters = {
      'date_range': (start_date, end_date),
      'categories': ['Furniture', 'Technology'],
      'regions': ['East', 'West']
  }
  ```
